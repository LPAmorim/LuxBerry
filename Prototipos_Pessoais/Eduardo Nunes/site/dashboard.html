<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=], initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script
    src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@1.1.0/dist/chartjs-plugin-annotation.min.js"></script>

</head>

<body>
  <div class="flex-dash">
    <div id="header" class="header-dash">
      <a href="index.html"><img src="assets/Lux Berry 1.png" alt=""></a>
      <div>
        <a href="#sobre_div">Sobre nós</a>
        <a href="">Calculadora</a>
        <a href="dashboard.html">Dashboard</a>
      </div>
    </div>
    <div class="dashboard container">
      <p class="bem-vindo">Olá XXXXX, bem vindo de volta!</p>
      <div class="div-canvas">
        <p>Captura de Luminosidade em intervalo de 20min - Estufa 1</p>
        <canvas id="grafico1" style="width: 100vh; height: 200px;"></canvas>
      </div>
      <div class="div-grafico-canvas2">
        <div class="div-grafico-canvas2-lum">
          <p>Luminosidade média</p>
          <div class="div-canvas2">
            <canvas id="grafico2"></canvas>
          </div>
        </div>
        <div class="div-kpi">
          <div class="div-kpi1">
            <div class="card-kpi">
              <p class="title-kpi">Tempo na luminosidade ideal</p>
              <p>55</p>
            </div>
            <div class="card-kpi">
              <p class="title-kpi">Alertas de luminosidade</p>
              <p>1</p>
            </div>
          </div>
          <div class="div-kpi1">
            <div class="card-kpi">
              <p class="title-kpi">Picos de luminosidade<br>(maior / menor)</p>
              <p>1237 / 820</p>
            </div>
            <div class="card-kpi">
              <p class="title-kpi">Dias monitorados</p>
              <p>7</p>
            </div>
          </div>
        </div>
        
      </div>
    </div>
  </div>
</body>
<script>
  const ctx = document.getElementById('grafico1').getContext('2d');
  const ctx2 = document.getElementById('grafico2');


  new Chart(ctx, {
    type: 'line',
    data: {
      labels: ['8:00:00 - 8:20:00', '8:20:00 - 8:40:00', '8:40:00 - 9:00:00',
        '9:00:00 - 9:20:00', '9:20:00 - 9:40:00', '9:40:00 - 10:00:00', '10:00:00 - 10:20:00', '10:20:00 - 10:40:00'],
      datasets: [{
        label: 'Lux detectado',
        data: [1014.50, 1368.00, 1058.25, 1237.4, 1200, 993, 1100.2, 1050.52],
        fill: false,
        borderColor: 'rgb(75, 192, 192)',
        tension: 0.1
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false, // deixa altura fixa e largura fluida
      scales: {
        y: {
          beginAtZero: true
        }
      },
      plugins: {
        annotation: {
          annotations: {
            maxLine: {
              type: 'line',
              yMin: 1500,
              yMax: 1500,
              borderColor: 'red',
              borderWidth: 2,
              label: {
                content: 'Lux Máximo',
                enabled: true,
                position: 'end'
              }
            },
            minLine: {
              type: 'line',
              yMin: 800,
              yMax: 800,
              borderColor: 'red',
              borderWidth: 2,
              label: {
                content: 'Lux Mínimo',
                enabled: true,
                position: 'start'
              }
            }
          }
        }
      }
    }
  });

  new Chart(ctx2, {
    type: 'bar',
    data: {
      labels: ['Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb', 'Dom'],
      datasets: [{
        label: 'Luminosidade média',
        data: [1014.5, 1368, 1058.25, 1326.5, 1372.25, 954.25, 1014.5],
        fill: false,
        backgroundColor: 'green',
        borderRadius: 100,
        barThickness: 30
      },
      {
        label: 'Desvio Padrão',
        data: [176.29, 138.27, 141.08, 55.01, 260.27, 105.20, 176.29],
        fill: false,
        backgroundColor: 'rgb(188, 71, 73)',
        borderRadius: 100,
        barThickness: 30
      }]
    },
    options: {
      responsive: true,
      scales: {
        y: {
          beginAtZero: true,
          grid: {
            display: false
          }
        },
        x: {
          grid: {
            display: false
          }
        }
      }
    }
  });
</script>

</html>